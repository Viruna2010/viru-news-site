<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIRU TV | News Engine</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Sinhala:wght@400;700;900&family=Orbitron:wght@700&display=swap');
        
        :root { --neon-blue: #00d2ff; --dark-bg: #020617; }

        body { 
            margin: 0; background-color: var(--dark-bg); color: white;
            font-family: 'Noto Sans Sinhala', sans-serif;
            height: 100vh; display: flex; flex-direction: column;
            align-items: center; justify-content: center; overflow: hidden;
        }

        #particles-js { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }

        .header { position: absolute; top: 40px; text-align: center; z-index: 10; }
        
        .viru-logo { 
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(40px, 8vw, 70px); font-weight: 700; color: var(--neon-blue);
            letter-spacing: 10px; text-transform: uppercase;
            text-shadow: 0 0 20px rgba(0, 210, 255, 0.5);
        }

        .live-tag {
            display: inline-flex; align-items: center; gap: 8px;
            background: rgba(0, 210, 255, 0.1); border: 1px solid var(--neon-blue);
            padding: 5px 15px; border-radius: 50px; margin-top: 10px;
            font-family: 'Orbitron', sans-serif; font-size: 12px; color: var(--neon-blue);
        }

        .dot { width: 8px; height: 8px; background: var(--neon-blue); border-radius: 50%; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.3; transform: scale(1.2); } }

        .news-container {
            width: 90%; max-width: 1100px; text-align: center;
            padding: 60px 20px; z-index: 5;
            background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(15px);
            border: 1px solid rgba(0, 210, 255, 0.2); border-radius: 2rem;
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
        }

        .headline { 
            font-size: clamp(24px, 5vw, 48px); color: #fff; font-weight: 700;
            line-height: 1.4; transition: opacity 0.8s ease-in-out;
            text-shadow: 0 2px 15px rgba(0,0,0,1);
        }

        .footer {
            position: absolute; bottom: 0; width: 100%;
            background: rgba(15, 23, 42, 0.95); padding: 15px 0;
            font-family: 'Orbitron', sans-serif;
            color: var(--neon-blue); font-size: 12px; text-align: center;
            letter-spacing: 3px; border-top: 1px solid rgba(0, 210, 255, 0.2);
        }

        #audio-hint {
            position: fixed; bottom: 100px; background: var(--neon-blue);
            color: black; padding: 10px 20px; border-radius: 5px;
            font-weight: bold; cursor: pointer; z-index: 20;
        }
    </style>
</head>
<body onclick="startAudio()">
    
    <div id="particles-js"></div>
    <div id="audio-hint">‡∑É‡∂Ç‡∂ú‡∑ì‡∂≠‡∂∫ ‡∑É‡∂≥‡∑Ñ‡∑è Click ‡∂ö‡∂ª‡∂±‡∑ä‡∂± üéµ</div>

    <div class="header">
        <div class="viru-logo">VIRU TV</div>
        <div class="live-tag"><div class="dot"></div> DIGITAL NEWS ENGINE</div>
    </div>

    <div class="news-container">
        <div class="headline" id="title-display">‡∂¥‡∑î‡∑Ä‡∂≠‡∑ä ‡∂¥‡∂Ø‡∑ä‡∂∞‡∂≠‡∑í‡∂∫ ‡∂¥‡∂´‡∂ú‡∑ê‡∂±‡∑ä‡∑Ä‡∑ô‡∂∏‡∑í‡∂±‡∑ä ‡∂¥‡∑Ä‡∂≠‡∑ì...</div>
    </div>

    <div class="footer">VIRU TV | 24/7 AUTOMATED NEWS SERVICE</div>

    <audio id="newsMusic" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mp3">
    </audio>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        particlesJS("particles-js", { "particles": { "number": { "value": 80 }, "color": { "value": "#00d2ff" }, "line_linked": { "enable": true, "color": "#00d2ff", "opacity": 0.2 }, "move": { "enable": true, "speed": 1 } } });

        let newsData = [];
        let currentIndex = 0;
        const apiUrl = 'https://esena-news-api-v3.vercel.app/news/trending';

        function startAudio() {
            document.getElementById('newsMusic').play();
            document.getElementById('audio-hint').style.display = 'none';
        }

        async function fetchNews() {
            try {
                // ‡∑É‡∑ò‡∂¢‡∑î‡∑Ä‡∂∏ Browser ‡∂ë‡∂ö‡∑ô‡∂±‡∑ä API ‡∂ë‡∂ö‡∂ß ‡∂ö‡∂≠‡∑è ‡∂ö‡∂ª‡∂±‡∑Ä‡∑è
                const response = await fetch(apiUrl);
                const result = await response.json();
                if (result.news_data && result.news_data.data) {
                    newsData = result.news_data.data.map(n => n.titleSi.replace(/Esana|‡∑Ñ‡∑ô‡∑Ö‡∂ö‡∑î‡∂ª‡∑î|Ada Derana/gi, "").trim());
                    return true;
                }
            } catch (e) { console.error("API Down"); }
            return false;
        }

        function updateDisplay() {
            if (newsData.length > 0) {
                const titleEl = document.getElementById('title-display');
                titleEl.style.opacity = 0;
                setTimeout(() => {
                    titleEl.innerText = newsData[currentIndex];
                    titleEl.style.opacity = 1;
                    currentIndex = (currentIndex + 1) % newsData.length;
                }, 800);
            }
        }

        async function init() {
            const ok = await fetchNews();
            if (ok && newsData.length > 0) {
                updateDisplay();
                setInterval(updateDisplay, 8000); 
            } else {
                setTimeout(init, 5000);
            }
        }

        init();
        setInterval(fetchNews, 600000);
    </script>
</body>
</html>
