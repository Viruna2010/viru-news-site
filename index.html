<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIRU TV | Digital News Engine</title>
    <style>
        /* Google Fonts - Noto Sans Sinhala & Orbitron */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Sinhala:wght@400;700;900&family=Orbitron:wght@700&display=swap');
        
        :root { --neon-red: #ff0000; --dark-bg: #050000; }

        body { 
            margin: 0; background-color: var(--dark-bg); color: white;
            font-family: 'Noto Sans Sinhala', sans-serif;
            height: 100vh; display: flex; flex-direction: column;
            align-items: center; justify-content: center; overflow: hidden;
            cursor: pointer;
        }

        #particles-js { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }

        /* Header UI */
        .header { position: absolute; top: 40px; text-align: center; z-index: 10; }
        
        .viru-logo { 
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(40px, 8vw, 75px); font-weight: 700; color: var(--neon-red);
            letter-spacing: 12px; text-transform: uppercase;
            text-shadow: 0 0 30px rgba(255, 0, 0, 0.8);
        }

        .live-tag {
            display: inline-flex; align-items: center; gap: 10px;
            background: rgba(255, 0, 0, 0.15); border: 2px solid var(--neon-red);
            padding: 8px 20px; border-radius: 4px; margin-top: 15px;
            font-family: 'Orbitron', sans-serif; font-size: 16px; color: var(--neon-red);
            font-weight: bold; letter-spacing: 2px;
        }

        .dot { width: 12px; height: 12px; background: var(--neon-red); border-radius: 50%; animation: pulse 0.8s infinite; }
        @keyframes pulse { 0% { opacity: 1; transform: scale(1); } 50% { opacity: 0.3; transform: scale(1.2); } 100% { opacity: 1; transform: scale(1); } }

        /* News Display Box */
        .news-container {
            width: 88%; max-width: 1250px; text-align: center;
            padding: 80px 45px; z-index: 5;
            background: rgba(20, 0, 0, 0.7); backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 0, 0, 0.4); border-radius: 15px;
            box-shadow: 0 0 60px rgba(255, 0, 0, 0.1);
        }

        .headline { 
            font-size: clamp(30px, 6.5vw, 60px); color: #fff; font-weight: 800;
            line-height: 1.4; transition: opacity 0.8s ease-in-out;
            text-shadow: 0 5px 20px rgba(0,0,0,1);
        }

        /* Bottom UI */
        .footer {
            position: absolute; bottom: 0; width: 100%;
            background: linear-gradient(transparent, rgba(50, 0, 0, 0.9)); padding: 25px 0;
            font-family: 'Orbitron', sans-serif;
            color: var(--neon-red); font-size: 14px; text-align: center;
            letter-spacing: 6px; border-top: 1px solid var(--neon-red);
        }

        .legal {
            position: absolute; bottom: 95px; width: 85%;
            font-size: 12px; color: #888; text-align: center; font-weight: bold;
            text-transform: uppercase;
        }
        
        #audio-hint {
            position: fixed; top: 10px; right: 10px; font-size: 11px; 
            color: var(--neon-red); opacity: 0.7; font-weight: bold;
        }
    </style>
</head>
<body onclick="playEngine()">

    <div id="audio-hint">CLICK ANYWHERE TO ACTIVATE AUDIO üéß</div>
    <div id="particles-js"></div>

    <div class="header">
        <div class="viru-logo">VIRU TV</div>
        <div class="live-tag"><div class="dot"></div> DIGITAL NEWS ENGINE</div>
    </div>

    <div class="news-container">
        <div class="headline" id="title-display">CONNECTING TO VIRU SERVER...</div>
    </div>

    <div class="legal">
        VIRU TV AI SYSTEM | AUTOMATED BROADCAST | EXCLUDING WEATHER UPDATES
    </div>

    <div class="footer">VIRU TV | THE FUTURE OF DIGITAL NEWS</div>

    <audio id="newsMusic" loop preload="auto">
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mp3">
    </audio>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // RED Particles Animation
        particlesJS("particles-js", { "particles": { "number": { "value": 90 }, "color": { "value": "#ff0000" }, "shape": { "type": "circle" }, "opacity": { "value": 0.5 }, "size": { "value": 2 }, "line_linked": { "enable": true, "distance": 150, "color": "#ff0000", "opacity": 0.2, "width": 1 }, "move": { "enable": true, "speed": 1.5 } } });

        let newsData = [];
        let currentIndex = 0;
        const apiUrl = 'https://esena-news-api-v3.vercel.app/news/trending';
        const music = document.getElementById('newsMusic');

        // ‡∂¥‡∑ö‡∂¢‡∑ä ‡∂ë‡∂ö‡∂ß ‡∂ú‡∑í‡∂∫ ‡∂ú‡∂∏‡∂±‡∑ä Click ‡∂ö‡∑Ö‡∑è‡∂∏ ‡∑É‡∑í‡∂±‡∑ä‡∂Ø‡∑î‡∑Ä ‡∂¥‡∂ß‡∂±‡∑ä ‡∂ú‡∂±‡∑ä‡∂±‡∑è Function ‡∂ë‡∂ö
        function playEngine() {
            music.play().catch(e => console.log("Waiting for user interaction..."));
            document.getElementById('audio-hint').style.display = 'none';
        }

        async function fetchNews() {
            try {
                const response = await fetch(apiUrl);
                const result = await response.json();
                if (result.news_data && result.news_data.data) {
                    // Filter: ‡∂ö‡∑è‡∂Ω‡∂ú‡∑î‡∂´ ‡∂¥‡∑î‡∑Ä‡∂≠‡∑ä ‡∂â‡∑Ä‡∂≠‡∑ä ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏
                    newsData = result.news_data.data
                        .filter(n => !n.titleSi.includes("‡∂ö‡∑è‡∂Ω‡∂ú‡∑î‡∂´") && !n.titleSi.includes("Weather"))
                        .map(n => n.titleSi.replace(/Esana|‡∑Ñ‡∑ô‡∑Ö‡∂ö‡∑î‡∂ª‡∑î|Ada Derana/gi, "").trim());
                    return true;
                }
            } catch (e) { console.error("Sync Error"); }
            return false;
        }

        function updateDisplay() {
            if (newsData.length > 0) {
                const titleEl = document.getElementById('title-display');
                titleEl.style.opacity = 0;
                setTimeout(() => {
                    titleEl.innerText = newsData[currentIndex];
                    titleEl.style.opacity = 1;
                    currentIndex = (currentIndex + 1) % newsData.length;
                }, 800);
            }
        }

        async function init() {
            const ok = await fetchNews();
            if (ok) {
                updateDisplay();
                setInterval(updateDisplay, 8500); // ‡∂≠‡∂≠‡∑ä‡∂¥‡∂ª 8.5 ‡∂ö‡∂ß ‡∑Ä‡∂ª‡∂ö‡∑ä ‡∂¥‡∑î‡∑Ä‡∂≠‡∑ä ‡∂∏‡∑è‡∂ª‡∑î ‡∑Ä‡∑ö
            } else {
                setTimeout(init, 5000);
            }
        }

        init();
        setInterval(fetchNews, 600000); // ‡∑Ä‡∑í‡∂±‡∑è‡∂©‡∑í 10 ‡∂ö‡∂ß ‡∑Ä‡∂ª‡∂ö‡∑ä ‡∂Ö‡∂Ω‡∑î‡∂≠‡∑ä ‡∂¥‡∑î‡∑Ä‡∂≠‡∑ä Fetch ‡∂ö‡∂ª‡∂∫‡∑í
    </script>
</body>
</html>
