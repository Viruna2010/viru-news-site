<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIRU NEWS | Digital News Engine</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Sinhala:wght@400;700;900&family=Orbitron:wght@700&display=swap');
        
        :root { 
            --neon-blue: #00d2ff; 
            --neon-red: #ff0000;
            --dark-bg: #020617; 
        }

        body { 
            margin: 0; background-color: var(--dark-bg); color: white;
            font-family: 'Noto Sans Sinhala', sans-serif;
            height: 100vh; display: flex; flex-direction: column;
            align-items: center; justify-content: center; overflow: hidden;
        }

        #particles-js { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }

        /* Welcome Overlay */
        #welcome-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, #0a192f 0%, #020617 100%);
            z-index: 100; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            transition: opacity 0.8s ease, visibility 0.8s;
        }

        .start-btn {
            padding: 20px 40px; font-family: 'Orbitron', sans-serif;
            font-size: 18px; color: var(--neon-blue); background: transparent;
            border: 2px solid var(--neon-blue); border-radius: 5px;
            cursor: pointer; letter-spacing: 4px;
            box-shadow: 0 0 15px rgba(0, 210, 255, 0.3);
            transition: 0.4s; text-transform: uppercase;
        }

        .start-btn:hover {
            background: var(--neon-blue); color: #000;
            box-shadow: 0 0 30px var(--neon-blue);
        }

        .overlay-logo {
            font-family: 'Orbitron', sans-serif; font-size: 50px;
            color: white; margin-bottom: 20px; letter-spacing: 15px;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
            text-align: center;
        }

        /* Header Style */
        .header { position: absolute; top: 40px; text-align: center; z-index: 10; width: 100%; }
        .viru-logo { 
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(30px, 8vw, 70px); font-weight: 700; color: var(--neon-blue);
            letter-spacing: 10px; text-transform: uppercase;
            text-shadow: 0 0 20px rgba(0, 210, 255, 0.5);
            white-space: nowrap;
        }

        /* Mobile Fix - මම මෙතන පොඩි වෙනසක් කළා පේළියට එන්න */
        @media screen and (max-width: 600px) {
            .viru-logo {
                letter-spacing: 4px; /* අකුරු අතර පරතරය අඩු කළා */
                font-size: 32px; /* අකුරු පොඩ්ඩක් කුඩා කළා */
            }
            .overlay-logo {
                letter-spacing: 5px;
                font-size: 35px;
            }
            .news-container {
                width: 90%;
                padding: 40px 20px;
            }
            .footer {
                letter-spacing: 2px;
                font-size: 10px;
            }
        }

        .live-tag {
            display: inline-flex; align-items: center; gap: 8px;
            background: rgba(255, 0, 0, 0.1); border: 1px solid var(--neon-red);
            padding: 5px 15px; border-radius: 50px; margin-top: 10px;
            font-family: 'Orbitron', sans-serif; font-size: 12px; color: var(--neon-red);
            font-weight: bold;
        }

        .dot { width: 8px; height: 8px; background: var(--neon-red); border-radius: 50%; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.3; transform: scale(1.2); } }

        /* News Display */
        .news-container {
            width: 85%; max-width: 1200px; text-align: center;
            padding: 60px 40px; z-index: 5;
            background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(12px);
            border: 1px solid rgba(0, 210, 255, 0.2); border-radius: 2rem;
            box-shadow: 0 0 40px rgba(0,0,0,0.5);
        }

        .headline { 
            font-size: clamp(22px, 5vw, 52px); color: #fff; font-weight: 800;
            line-height: 1.5; transition: opacity 0.8s ease-in-out;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        /* Footer & Legal */
        .footer {
            position: absolute; bottom: 0; width: 100%;
            background: rgba(15, 23, 42, 0.9); padding: 20px 0;
            font-family: 'Orbitron', sans-serif;
            color: var(--neon-blue); font-size: 14px; text-align: center;
            letter-spacing: 5px; border-top: 1px solid rgba(0, 210, 255, 0.2);
        }

        .legal {
            position: absolute; bottom: 85px; width: 80%;
            font-size: 11px; color: #475569; text-align: center; font-weight: bold;
        }
    </style>
</head>
<body>

    <div id="welcome-overlay">
        <div class="overlay-logo">VIRU NEWS</div>
        <button class="start-btn" onclick="startEngine()">Click to See News</button>
    </div>
    
    <div id="particles-js"></div>

    <div class="header">
        <div class="viru-logo">VIRU NEWS</div>
        <div class="live-tag"><div class="dot"></div> DIGITAL NEWS ENGINE</div>
    </div>

    <div class="news-container">
        <div class="headline" id="title-display">System Initializing...</div>
    </div>

    <div class="legal">
        * ස්වයංක්‍රීයව උපුටා ගන්නා පුවත් මෙහි පළවන අතර එහි නිරවද්‍යතාවය පිළිබඳ වගකීමක් දරනු නොලැබේ.
    </div>

    <div class="footer">VIRU NEWS | 24/7 AUTOMATED NEWS SERVICE</div>

    <audio id="newsMusic" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mp3">
    </audio>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        particlesJS("particles-js", { "particles": { "number": { "value": 60, "density": { "enable": true, "value_area": 800 } }, "color": { "value": "#00d2ff" }, "opacity": { "value": 0.4 }, "size": { "value": 2 }, "line_linked": { "enable": true, "distance": 150, "color": "#00d2ff", "opacity": 0.1, "width": 1 }, "move": { "enable": true, "speed": 1 } } });

        let newsData = [];
        let currentIndex = 0;
        const apiUrl = 'https://esena-news-api-v3.vercel.app/news/trending';
        const music = document.getElementById('newsMusic');

        function startEngine() {
            music.play();
            const overlay = document.getElementById('welcome-overlay');
            overlay.style.opacity = '0';
            setTimeout(() => {
                overlay.style.visibility = 'hidden';
            }, 800);
            init();
        }

        async function fetchNews() {
            try {
                const response = await fetch(apiUrl);
                const result = await response.json();
                if (result.news_data && result.news_data.data) {
                    newsData = result.news_data.data
                        .filter(n => !n.titleSi.includes("කාලගුණ") && !n.titleSi.includes("Weather"))
                        .map(n => n.titleSi.replace(/Esana|හෙළකුරු|Ada Derana/gi, "").trim());
                    return true;
                }
            } catch (e) { console.error("Sync Error"); }
            return false;
        }

        function updateDisplay() {
            if (newsData.length > 0) {
                const titleEl = document.getElementById('title-display');
                titleEl.style.opacity = 0;
                setTimeout(() => {
                    titleEl.innerText = newsData[currentIndex];
                    titleEl.style.opacity = 1;
                    currentIndex = (currentIndex + 1) % newsData.length;
                }, 800);
            }
        }

        async function init() {
            const ok = await fetchNews();
            if (ok) {
                updateDisplay();
                setInterval(updateDisplay, 8000); 
            } else {
                setTimeout(init, 5000);
            }
        }

        setInterval(fetchNews, 600000);
    </script>
</body>
</html>
